# CTMRG.jl

## 📄 レポート内容
角転送行列繰り込み群（CTMRG）を用いて **自発磁化** と **スピン相関関数** を計算する予定だったが、間に合わなかったため、今回は以下のCTMRGを用いなくてもできる計算をテンソルネットワークを用いて行いました。

- L = 1, 2, 3 の自発磁化 (テンソルネットワーク)
- L = 3 の温度 1.0 ～ 4.0 の範囲でのスピン相関関数（テンソルネットワーク）

結果は **`result`** フォルダに格納されています。

---

## `src` ディレクトリのコード説明

### `1D_ising_ref.jl`
- 1次元イジング模型の分配関数（テンソルネットワーク）
- 厳密解あり（本来は2次元版を作りたかったが時間切れ）

### `1D_ising.jl`
- 1次元イジング模型の分配関数（テンソルネットワーク使用）

### `2D_ising.jl`
- 2次元イジング模型の分配関数・自発磁化・スピン相関関数を計算
- 縮約順序が未最適化 → L=4（16×16格子）は計算が重い

### `diag.jl`
- 角転送行列の対角化  
- 固有値・固有ベクトルの ITensor を作成

### `spin.jl`
- 自発磁化計算などに使用するスピン ITensor を作成

### `tag.jl`
- 分配関数用の `Index` タグを一括作成  
- 分配関数時は `j` が行, `i` が列  
- 角転送行列時は `i` が行, `j` が列（注意）

### `tensor.jl`
- 固定端条件・自由端条件の ITensor

### `CTMRG_prepare.jl`
- 環境テンソル作成の部品  
- 部品は揃っているが、テスト未実施のため最終コードは未作成

---

## 📂 フォルダ構成

- **`notebook/`** : 各関数のテストコード
- **`1D_ising/`** : 分配関数計算結果（既存手法とテンソルネットワーク）
- **`2D_ising/`** : 分配関数・自発磁化の計算結果 (テンソルネットワークのみ)
- **`result/`** : レポートのメイン結果（自発磁化・スピン相関関数）

---

## パラメータ
- **β** : 逆温度  
- **J** : 相互作用定数  
- **L** : 系のサイズ（L=1 → 2×2格子）

境界条件は **端のスピンを + 固定**（固定端条件）。

## 注意
runtestsで関数を少し変えたからかエラーが出ています。(後ほど修正いたします。)
